<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Bloom - Hoa tươi cao cấp</title>
  <meta name="description" content="Bloom - Shop hoa tươi cao cấp với những bó hoa, lẵng hoa và kệ hoa đẹp nhất. Lan tỏa hương sắc thiên nhiên.">
  <link rel="stylesheet" href="main.css">
  <link rel="stylesheet" href="index.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet">
  <link rel="preload" href="images/hoa1.jpg" as="image">
  <link rel="preload" href="images/hoa2.jpg" as="image">
</head>
<body>
  <!-- SITE WRAPPER -->
  <div class="site-wrapper">

    <!-- HEADER -->
    <header class="bloom-header">
      <div class="bloom-container">
        <div class="bloom-logo" aria-label="Bloom - Trở về trang chủ">
          <a href="index.html" aria-label="Bloom - Trở về trang chủ"></a>
          <svg class="logo-icon" viewBox="0 0 100 100" fill="none" aria-hidden="true">
            <circle cx="50" cy="50" r="45" fill="#2e7d68" opacity="0.9"/>
            <path d="M50 20 C60 15, 75 25, 75 40 C75 55, 60 65, 50 70 C40 65, 25 55, 25 40 C25 25, 40 15, 50 20" fill="#eaf8f0"/>
            <circle cx="40" cy="35" r="8" fill="#b19cd9"/>
            <circle cx="60" cy="35" r="8" fill="#b19cd9"/>
            <circle cx="50" cy="50" r="12" fill="#9370db"/>
            <path d="M50 70 L45 85 L55 85 Z" fill="#2e7d68"/>
          </svg>
          <span>Bloom</span>
        </div>

        <nav class="bloom-nav" aria-label="Menu chính">
          <a href="index.html" aria-current="page">Trang chủ</a>
          <a href="2_DangNhap.html" title="Đăng nhập" aria-label="Đăng nhập" class="login-link">
            <i class="fa-regular fa-circle-user" aria-hidden="true"></i>
            <span>Đăng nhập</span>
          </a>
        </nav>
        
        <!-- Menu mobile -->
        <button class="mobile-menu-toggle" aria-label="Toggle menu" aria-expanded="false">
          <i class="fas fa-bars" aria-hidden="true"></i>
        </button>
      </div>
    </header>

    <!-- ==== HERO ==== -->
    <section class="hero" aria-labelledby="hero-title">
      <div class="hero-content">
        <h1 id="hero-title">Lan tỏa hương sắc thiên nhiên</h1>
        <p>Những bó hoa Bloom mang hơi thở của sự tinh tế, thuần khiết và chân thành. </p>
        <button class="btn-hero" onclick="scrollToProducts()">Khám phá ngay</button>
      </div>
    </section>

    <!-- DANH MỤC -->
    <section class="categories container" aria-labelledby="categories-title">
      <h2 id="categories-title" class="visually-hidden">Danh mục sản phẩm</h2>
      <ul role="tablist">
        <li role="tab" aria-selected="true" class="active">
          <a href="#all-products" onclick="filterProducts('all')">Tất cả sản phẩm</a>
        </li>
        <li role="tab" aria-selected="false">
          <a href="#bouquets" onclick="filterProducts('bo-hoa')">Bó hoa</a>
        </li>
        <li role="tab" aria-selected="false">
          <a href="#baskets" onclick="filterProducts('lang-hoa')">Lẵng hoa</a>
        </li>
        <li role="tab" aria-selected="false">
          <a href="#stands" onclick="filterProducts('ke-hoa')">Kệ hoa</a>
        </li>
      </ul>
    </section>

    <!-- TÌM KIẾM NÂNG CAO -->
    <section class="advanced-search container" aria-labelledby="search-title">
      <h2 id="search-title" class="visually-hidden">Tìm kiếm sản phẩm</h2>
      
      <div class="search-toggle" role="tablist">
        <button class="toggle-btn active" data-tab="basic" role="tab" aria-selected="true" aria-controls="basic-search">
          Tìm kiếm cơ bản
        </button>
        <button class="toggle-btn" data-tab="advanced" role="tab" aria-selected="false" aria-controls="advanced-search">
          Tìm kiếm nâng cao
        </button>
      </div>

      <!-- Tìm kiếm cơ bản -->
      <div class="search-tab active" id="basic-search" role="tabpanel" aria-labelledby="basic-search-tab">
        <div class="basic-search-form">
          <div class="search-input-group">
            <input 
              type="text" 
              placeholder="Nhập tên sản phẩm bạn muốn tìm..." 
              class="search-input" 
              id="basic-search-input"
              aria-label="Tìm kiếm sản phẩm"
            >
            <button class="search-btn" id="basic-search-btn" aria-label="Tìm kiếm">
              <i class="fas fa-search" aria-hidden="true"></i>
              Tìm kiếm
            </button>
          </div>
        </div>
      </div>

      <!-- Tìm kiếm nâng cao -->
      <div class="search-tab" id="advanced-search" role="tabpanel" aria-labelledby="advanced-search-tab" hidden>
        <form class="advanced-search-form" id="advanced-search-form">
          <div class="search-row">
            <div class="search-group">
              <label for="product-name">Tên sản phẩm</label>
              <input type="text" id="product-name" placeholder="Nhập tên sản phẩm...">
            </div>
            
            <div class="search-group">
              <label for="category">Phân loại</label>
              <select id="category">
                <option value="">Tất cả phân loại</option>
                <option value="bo-hoa">Bó hoa</option>
                <option value="lang-hoa">Lẵng hoa</option>
                <option value="ke-hoa">Kệ hoa</option>
              </select>
            </div>
          </div>

          <div class="search-row">
            <div class="search-group">
              <label for="min-price">Giá từ</label>
              <div class="price-input-group">
                <input type="number" id="min-price" placeholder="0" min="0" aria-label="Giá tối thiểu">
                <span class="currency">₫</span>
              </div>
            </div>
            
            <div class="search-group">
              <label for="max-price">Đến</label>
              <div class="price-input-group">
                <input type="number" id="max-price" placeholder="10,000,000" min="0" aria-label="Giá tối đa">
                <span class="currency">₫</span>
              </div>
            </div>
          </div>

          <div class="search-actions">
            <button type="reset" class="btn-secondary" id="reset-btn">
              <i class="fas fa-redo" aria-hidden="true"></i>
              Đặt lại
            </button>
            <button type="submit" class="search-submit" id="advanced-search-btn">
              <i class="fas fa-search" aria-hidden="true"></i>
              Tìm kiếm
            </button>
          </div>
        </form>
      </div>
    </section>

    <!-- KẾT QUẢ TÌM KIẾM -->
    <section class="search-results container" id="search-results" aria-labelledby="search-results-title" hidden>
      <div class="results-header">
        <h2 id="search-results-title">Kết quả tìm kiếm</h2>
        <div class="results-info">
          <span class="results-count">Tìm thấy <strong id="results-count">0</strong> sản phẩm</span>
          <div class="sort-options">
            <label for="sort-by">Sắp xếp:</label>
            <select id="sort-by" aria-label="Sắp xếp kết quả">
              <option value="popular">Phổ biến nhất</option>
              <option value="newest">Mới nhất</option>
              <option value="price-low">Giá thấp đến cao</option>
              <option value="price-high">Giá cao đến thấp</option>
              <option value="name">Tên A-Z</option>
            </select>
          </div>
        </div>
      </div>

      <div class="product-grid" id="search-results-grid" role="list" aria-label="Danh sách sản phẩm tìm thấy">
        <!-- Kết quả tìm kiếm sẽ hiển thị ở đây -->
      </div>

      <!-- PHÂN TRANG -->
      <nav class="pagination" id="search-pagination" aria-label="Phân trang kết quả tìm kiếm">
        <a href="#" class="page-nav disabled" aria-label="Trang trước" aria-disabled="true">
          <i class="fas fa-chevron-left" aria-hidden="true"></i>
        </a>
        <a href="#" class="page-number active" aria-label="Trang 1" aria-current="page">1</a>
        <a href="#" class="page-number" aria-label="Trang 2">2</a>
        <a href="#" class="page-number" aria-label="Trang 3">3</a>
        <span class="page-ellipsis" aria-hidden="true">...</span>
        <a href="#" class="page-number" aria-label="Trang 8">8</a>
        <a href="#" class="page-nav" aria-label="Trang sau">
          <i class="fas fa-chevron-right" aria-hidden="true"></i>
        </a>
      </nav>
    </section>

    <!-- SẢN PHẨM MẶC ĐỊNH -->
    <main id="products" class="container" aria-labelledby="products-title">
      <h2 id="products-title" class="visually-hidden">Sản phẩm nổi bật</h2>
      <div class="product-grid" id="default-products" role="list" aria-label="Danh sách sản phẩm">
        <!-- Sản phẩm sẽ được render bằng JavaScript -->
      </div>
    </main>

    <!-- THÊM SAU PHẦN SẢN PHẨM MẶC ĐỊNH -->
    <div class="pagination" id="default-pagination" aria-label="Phân trang sản phẩm">
        <a href="#" class="page-nav disabled" aria-label="Trang trước" aria-disabled="true">
            <i class="fas fa-chevron-left" aria-hidden="true"></i>
        </a>
        <a href="#" class="page-number active" aria-label="Trang 1" aria-current="page">1</a>
        <a href="#" class="page-number" aria-label="Trang 2">2</a>
        <a href="#" class="page-number" aria-label="Trang 3">3</a>
        <span class="page-ellipsis" aria-hidden="true">...</span>
        <a href="#" class="page-number" aria-label="Trang 8">8</a>
        <a href="#" class="page-nav" aria-label="Trang sau">
            <i class="fas fa-chevron-right" aria-hidden="true"></i>
        </a>
    </div>

    <!-- FOOTER -->
    <footer class="site-footer" aria-labelledby="footer-heading">
      <div class="container footer-inner">
        <h2 id="footer-heading" class="visually-hidden">Thông tin liên hệ</h2>
        <div class="footer-main">
          <div class="footer-brand">
            <div class="footer-logo">
              <svg width="60" height="60" viewBox="0 0 100 100" fill="none" aria-hidden="true">
                <circle cx="50" cy="50" r="45" fill="#2e7d68" opacity="0.9"/>
                <path d="M50 20 C60 15, 75 25, 75 40 C75 55, 60 65, 50 70 C40 65, 25 55, 25 40 C25 25, 40 15, 50 20" fill="#eaf8f0"/>
                <circle cx="40" cy="35" r="8" fill="#b19cd9"/>
                <circle cx="60" cy="35" r="8" fill="#b19cd9"/>
                <circle cx="50" cy="50" r="12" fill="#9370db"/>
                <path d="M50 70 L45 85 L55 85 Z" fill="#2e7d68"/>
              </svg>
              <span>Bloom</span>
            </div>
            <p class="footer-tagline">Lan tỏa hương sắc thiên nhiên</p>
          </div>

          <div class="footer-contact">
            <h3>Thông Tin Liên Hệ</h3>
            <div class="contact-info">
              <div class="contact-item">
                <i class="fas fa-globe" aria-hidden="true"></i>
                <span>bloom.vn</span>
              </div>
              <div class="contact-item">
                <i class="fas fa-map-marker-alt" aria-hidden="true"></i>
                <span>123 Đường Hoa, Quận 1, TP.HCM</span>
              </div>
              <div class="contact-item">
                <i class="fas fa-phone" aria-hidden="true"></i>
                <a href="tel:+84901234567">090 123 4567</a>
              </div>
              <div class="contact-item">
                <i class="fas fa-envelope" aria-hidden="true"></i>
                <a href="mailto:info@bloom.vn">info@bloom.vn</a>
              </div>
              <div class="contact-item">
                <i class="fas fa-clock" aria-hidden="true"></i>
                <span>T2 – CN: 8h30 – 21h00</span>
              </div>
            </div>
          </div>
        </div>
        
        <div class="footer-bottom">
          <p>&copy; 2024 Bloom - Shop hoa tươi. All rights reserved.</p>
        </div>
      </div>
    </footer>

  </div> <!-- /site-wrapper -->

  <!-- JAVASCRIPT TÌM KIẾM -->
  <script>
    // Dữ liệu mẫu cho sản phẩm
    const sampleProducts = [
      {
        id: 1,
        name: "Nhiệt Ái",
        price: 700000,
        category: "bo-hoa",
        image: "images/hoa1.jpg",
        description: "Bó hoa hồng đỏ thể hiện trọn vẹn sự mãnh liệt và lãng mạn của tình yêu",
        popular: true
      },
      {
        id: 2,
        name: "Peach",
        price: 770000,
        category: "bo-hoa",
        image: "images/hoa2.jpg",
        description: "Bó hoa hồng phấn dịu dàng và thanh lịch, hoàn hảo cho những dịp đặc biệt",
        popular: true
      },
      {
        id: 3,
        name: "Blueberry",
        price: 250000,
        category: "bo-hoa",
        image: "images/hoa3.jpg",
        description: "Sắc tím quyến rũ và bí ẩn, phù hợp cho những người yêu thích sự độc đáo",
        popular: false
      },
      {
        id: 4,
        name: "Lemon",
        price: 650000,
        category: "bo-hoa",
        image: "images/hoa4.jpg",
        description: "Bó hoa tươi sáng và tràn đầy năng lượng với sắc vàng rực rỡ",
        popular: true
      },
      {
        id: 5,
        name: "Vườn Xuân Ca",
        price: 670000,
        category: "bo-hoa",
        image: "images/hoa5.jpg",
        description: "Sự kết hợp hài hòa của nhiều loại hoa tạo nên vẻ đẹp tự nhiên và tinh tế",
        popular: false
      },
      {
        id: 6,
        name: "Shimmer Grace",
        price: 1150000,
        category: "lang-hoa",
        image: "images/langhoa1.webp",
        description: "Lẵng hoa trắng tinh khôi và thanh khiết, sang trọng cho không gian hiện đại",
        popular: true
      },
      {
        id: 7,
        name: "BlueSky",
        price: 1450000,
        category: "lang-hoa",
        image: "images/langhoa2.jpg",
        description: "Thiết kế độc đáo với tông màu xanh dịu mát, mang đến cảm giác bình yên",
        popular: false
      },
      {
        id: 8,
        name: "Sen Xanh",
        price: 1500000,
        category: "lang-hoa",
        image: "images/langhoa3.png",
        description: "Lẵng hoa sen thanh tao và quý phái, lấy cảm hứng từ nghệ thuật truyền thống",
        popular: true
      },
      {
        id: 9,
        name: "Sắc Màu",
        price: 3500000,
        category: "ke-hoa",
        image: "images/kehoa1.jpg",
        description: "Kệ hoa đa sắc màu rực rỡ, tạo điểm nhấn ấn tượng cho không gian rộng",
        popular: true
      },
      {
        id: 10,
        name: "Hồng Phát",
        price: 1900000,
        category: "ke-hoa",
        image: "images/kehoa2.jpg",
        description: "Kệ hoa mang đến may mắn và tài lộc, thiết kế tinh xảo và ý nghĩa",
        popular: false
      },
      {
        id: 11,
        name: "Tương Lai",
        price: 2100000,
        category: "ke-hoa",
        image: "images/kehoa3.jpg",
        description: "Kệ hoa hiện đại hướng đến tương lai, phù hợp với không gian đương đại",
        popular: true
      }
    ];

    // Biến toàn cục
    let searchTimeout;
    let currentCategory = 'all';
    let currentSort = 'popular';

    // Cấu hình phân trang
    const paginationConfig = {
      currentPage: 1,
      itemsPerPage: 8,
      totalPages: 1
    };

    // Hàm tiện ích
    function scrollToProducts() {
      document.getElementById('products').scrollIntoView({ 
        behavior: 'smooth',
        block: 'start'
      });
    }

    function handleImageError(img) {
      img.src = 'https://images.unsplash.com/photo-1487070183333-13a8a54b5f14?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80';
      img.alt = 'Hình ảnh sản phẩm tạm thời không khả dụng';
    }

    // Hàm phân trang sản phẩm
    function paginateProducts(products, page = 1) {
      const startIndex = (page - 1) * paginationConfig.itemsPerPage;
      const endIndex = startIndex + paginationConfig.itemsPerPage;
      return products.slice(startIndex, endIndex);
    }

    // Hàm cập nhật phân trang
    function updatePagination(products, paginationId, currentPage = 1) {
      const totalProducts = products.length;
      const totalPages = Math.ceil(totalProducts / paginationConfig.itemsPerPage);
      
      paginationConfig.totalPages = totalPages;
      paginationConfig.currentPage = currentPage;
      
      const paginationContainer = document.getElementById(paginationId);
      
      if (totalPages <= 1) {
        paginationContainer.style.display = 'none';
        return;
      }
      
      paginationContainer.style.display = 'flex';
      renderPagination(paginationContainer, currentPage, totalPages);
    }

    // Hàm render phân trang
    function renderPagination(container, currentPage, totalPages) {
      let paginationHTML = '';
      
      // Nút Previous
      if (currentPage > 1) {
        paginationHTML += `
          <a href="#" class="page-nav" aria-label="Trang trước" onclick="changePage(${currentPage - 1})">
            <i class="fas fa-chevron-left" aria-hidden="true"></i>
          </a>
        `;
      } else {
        paginationHTML += `
          <a href="#" class="page-nav disabled" aria-label="Trang trước" aria-disabled="true">
            <i class="fas fa-chevron-left" aria-hidden="true"></i>
          </a>
        `;
      }
      
      // Các số trang
      for (let i = 1; i <= totalPages; i++) {
        if (i === 1 || i === totalPages || (i >= currentPage - 1 && i <= currentPage + 1)) {
          const isActive = i === currentPage;
          paginationHTML += `
            <a href="#" class="page-number ${isActive ? 'active' : ''}" 
               aria-label="Trang ${i}" ${isActive ? 'aria-current="page"' : ''}
               onclick="changePage(${i})">
              ${i}
            </a>
          `;
        } else if (i === currentPage - 2 || i === currentPage + 2) {
          paginationHTML += `<span class="page-ellipsis" aria-hidden="true">...</span>`;
        }
      }
      
      // Nút Next
      if (currentPage < totalPages) {
        paginationHTML += `
          <a href="#" class="page-nav" aria-label="Trang sau" onclick="changePage(${currentPage + 1})">
            <i class="fas fa-chevron-right" aria-hidden="true"></i>
          </a>
        `;
      } else {
        paginationHTML += `
          <a href="#" class="page-nav disabled" aria-label="Trang sau" aria-disabled="true">
            <i class="fas fa-chevron-right" aria-hidden="true"></i>
          </a>
        `;
      }
      
      container.innerHTML = paginationHTML;
    }

    // Hàm chuyển trang
    function changePage(page) {
      paginationConfig.currentPage = page;
      
      // Cập nhật sản phẩm theo trang
      if (document.getElementById('search-results').hidden) {
        // Đang ở chế độ xem sản phẩm mặc định
        renderDefaultProducts();
        updatePagination(
          getCurrentProducts(), 
          'default-pagination', 
          page
        );
      } else {
        // Đang ở chế độ tìm kiếm
        const currentResults = getCurrentSearchResults();
        displaySearchResults(currentResults, currentSort, page);
      }
      
      // Scroll lên đầu trang
      window.scrollTo({
        top: document.getElementById('products').offsetTop - 100,
        behavior: 'smooth'
      });
    }

    // Hàm lấy sản phẩm hiện tại
    function getCurrentProducts() {
      return currentCategory === 'all' 
        ? sampleProducts 
        : sampleProducts.filter(p => p.category === currentCategory);
    }

    // Hàm lấy kết quả tìm kiếm hiện tại
    function getCurrentSearchResults() {
      const filters = getCurrentSearchFilters();
      return searchProducts(filters);
    }

    // Hàm lấy bộ lọc tìm kiếm hiện tại
    function getCurrentSearchFilters() {
      const activeTab = document.querySelector('.search-tab.active').id;
      
      if (activeTab === 'basic-search') {
        return {
          name: document.getElementById('basic-search-input').value.trim()
        };
      } else {
        return {
          name: document.getElementById('product-name').value.trim(),
          category: document.getElementById('category').value,
          minPrice: document.getElementById('min-price').value ? parseInt(document.getElementById('min-price').value) : null,
          maxPrice: document.getElementById('max-price').value ? parseInt(document.getElementById('max-price').value) : null
        };
      }
    }

    // Hàm tìm kiếm sản phẩm
    function searchProducts(filters) {
      return sampleProducts.filter(product => {
        // Lọc theo tên sản phẩm
        if (filters.name && !product.name.toLowerCase().includes(filters.name.toLowerCase())) {
          return false;
        }
        
        // Lọc theo phân loại
        if (filters.category && product.category !== filters.category) {
          return false;
        }
        
        // Lọc theo khoảng giá
        if (filters.minPrice && product.price < filters.minPrice) {
          return false;
        }
        if (filters.maxPrice && product.price > filters.maxPrice) {
          return false;
        }
        
        return true;
      });
    }

    // Hàm hiển thị kết quả tìm kiếm
    function displaySearchResults(products, sortBy = 'popular', page = 1) {
      const resultsContainer = document.getElementById('search-results-grid');
      const resultsCount = document.getElementById('results-count');
      const resultsSection = document.getElementById('search-results');
      const defaultProducts = document.getElementById('default-products');
      
      const sortedProducts = sortProducts(products, sortBy);
      const paginatedProducts = paginateProducts(sortedProducts, page);
      
      resultsCount.textContent = sortedProducts.length;
      resultsCount.setAttribute('aria-live', 'polite');
      
      resultsContainer.innerHTML = '';
      
      if (paginatedProducts.length === 0) {
        resultsContainer.innerHTML = `
          <div class="no-results">
            <i class="fas fa-search" aria-hidden="true"></i>
            <h3>Không tìm thấy sản phẩm phù hợp</h3>
            <p>Hãy thử điều chỉnh tiêu chí tìm kiếm của bạn</p>
          </div>
        `;
        document.getElementById('search-pagination').style.display = 'none';
      } else {
        paginatedProducts.forEach(product => {
          const productElement = createProductElement(product);
          resultsContainer.appendChild(productElement);
        });
        
        // Cập nhật phân trang cho kết quả tìm kiếm
        updatePagination(sortedProducts, 'search-pagination', page);
      }
      
      defaultProducts.style.display = 'none';
      resultsSection.hidden = false;
    }

    // Hàm hiển thị sản phẩm mặc định
    function showDefaultProducts() {
      const resultsSection = document.getElementById('search-results');
      const defaultProducts = document.getElementById('default-products');
      
      resultsSection.hidden = true;
      defaultProducts.style.display = 'grid';
      renderDefaultProducts();
    }

    // Hàm render sản phẩm mặc định
    function renderDefaultProducts() {
      const container = document.getElementById('default-products');
      const allProducts = getCurrentProducts();
      const paginatedProducts = paginateProducts(allProducts, paginationConfig.currentPage);
      
      container.innerHTML = '';
      paginatedProducts.forEach(product => {
        const productElement = createProductElement(product);
        container.appendChild(productElement);
      });
      
      // Cập nhật phân trang
      updatePagination(allProducts, 'default-pagination', paginationConfig.currentPage);
    }

    // Hàm lọc sản phẩm theo danh mục
    function filterProducts(category) {
      currentCategory = category;
      paginationConfig.currentPage = 1; // Reset về trang 1 khi chuyển danh mục
      
      document.querySelectorAll('.categories li').forEach(li => {
        li.setAttribute('aria-selected', 'false');
        li.classList.remove('active');
      });
      
      event.currentTarget.parentElement.setAttribute('aria-selected', 'true');
      event.currentTarget.parentElement.classList.add('active');
      
      renderDefaultProducts();
    }

    // Hàm sắp xếp sản phẩm
    function sortProducts(products, sortBy) {
      switch (sortBy) {
        case 'newest':
          return [...products].sort((a, b) => b.id - a.id);
        case 'price-low':
          return [...products].sort((a, b) => a.price - b.price);
        case 'price-high':
          return [...products].sort((a, b) => b.price - a.price);
        case 'name':
          return [...products].sort((a, b) => a.name.localeCompare(b.name));
        default: // popular
          return [...products].sort((a, b) => (b.popular === a.popular) ? 0 : b.popular ? -1 : 1);
      }
    }

    // Hàm tạo HTML cho sản phẩm - LUÔN HIỂN THỊ NÚT "ĐĂNG NHẬP ĐỂ MUA"
    function createProductElement(product) {
      const productDiv = document.createElement('article');
      productDiv.className = 'product';
      productDiv.setAttribute('role', 'listitem');
      productDiv.innerHTML = `
        <a href="4_ChiTietSanPham.html">
          <img 
            src="${product.image}" 
            alt="${product.name} - ${product.description}" 
            loading="lazy"
            onerror="handleImageError(this)"
          >
        </a>
        <h3>${product.name}</h3>
        <p class="price">${product.price.toLocaleString('vi-VN')}₫</p>
        <button class="btn-outline" onclick="redirectToLogin()">
          Đăng nhập để mua
        </button>
      `;
      return productDiv;
    }
    // Hàm chuyển hướng đến trang đăng nhập
    function redirectToLogin() {
      window.location.href = '2_DangNhap.html';
    }

    // JavaScript chính khi trang load
    document.addEventListener('DOMContentLoaded', function() {
      // Render sản phẩm mặc định
      renderDefaultProducts();

      // Chuyển đổi giữa các tab tìm kiếm
      const toggleBtns = document.querySelectorAll('.toggle-btn');
      const searchTabs = document.querySelectorAll('.search-tab');
      
      toggleBtns.forEach(btn => {
        btn.addEventListener('click', function() {
          const targetTab = this.getAttribute('data-tab');
          
          // Cập nhật trạng thái active cho nút
          toggleBtns.forEach(b => {
            b.classList.remove('active');
            b.setAttribute('aria-selected', 'false');
          });
          this.classList.add('active');
          this.setAttribute('aria-selected', 'true');
          
          // Hiển thị tab tương ứng
          searchTabs.forEach(tab => {
            tab.classList.remove('active');
            tab.hidden = true;
            if (tab.id === `${targetTab}-search`) {
              tab.classList.add('active');
              tab.hidden = false;
            }
          });
        });
      });
      
      // Xử lý tìm kiếm cơ bản
      const basicSearchBtn = document.getElementById('basic-search-btn');
      const basicSearchInput = document.getElementById('basic-search-input');
      
      basicSearchBtn.addEventListener('click', function() {
        const searchTerm = basicSearchInput.value.trim();
        if (!searchTerm) {
          alert('Vui lòng nhập từ khóa tìm kiếm');
          basicSearchInput.focus();
          return;
        }
        
        const filters = {
          name: searchTerm
        };
        
        const results = searchProducts(filters);
        displaySearchResults(results);
      });
      
      // Xử lý tìm kiếm nâng cao
      const advancedSearchForm = document.getElementById('advanced-search-form');
      
      advancedSearchForm.addEventListener('submit', function(e) {
        e.preventDefault();
        
        const filters = {
          name: document.getElementById('product-name').value.trim(),
          category: document.getElementById('category').value,
          minPrice: document.getElementById('min-price').value ? parseInt(document.getElementById('min-price').value) : null,
          maxPrice: document.getElementById('max-price').value ? parseInt(document.getElementById('max-price').value) : null
        };
        
        const results = searchProducts(filters);
        displaySearchResults(results);
      });
      
      // Xử lý sắp xếp
      const sortSelect = document.getElementById('sort-by');
      sortSelect.addEventListener('change', function() {
        currentSort = this.value;
        const currentProducts = Array.from(document.querySelectorAll('#search-results-grid .product'))
          .map(el => {
            const name = el.querySelector('h3').textContent;
            return sampleProducts.find(p => p.name === name);
          })
          .filter(p => p !== undefined);
        
        if (currentProducts.length > 0) {
          displaySearchResults(currentProducts, this.value);
        } else {
          renderDefaultProducts();
        }
      });
      
      // Đặt lại form
      const resetBtn = document.getElementById('reset-btn');
      resetBtn.addEventListener('click', function() {
        // Reset tất cả input trong form tìm kiếm nâng cao
        document.getElementById('product-name').value = '';
        document.getElementById('category').value = '';
        document.getElementById('min-price').value = '';
        document.getElementById('max-price').value = '';
        
        // Hiển thị sản phẩm mặc định
        showDefaultProducts();
      });

      // Cho phép nhấn Enter để tìm kiếm
      basicSearchInput.addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
          basicSearchBtn.click();
        }
      });

      // Debounce cho tìm kiếm real-time
      basicSearchInput.addEventListener('input', function(e) {
        clearTimeout(searchTimeout);
        searchTimeout = setTimeout(() => {
          if (e.target.value.trim().length >= 2) {
            basicSearchBtn.click();
          }
        }, 500);
      });

      // Header scroll effect
      window.addEventListener('scroll', () => {
        const header = document.querySelector('.bloom-header');
        if (window.scrollY > 50) {
          header.classList.add('scrolled');
        } else {
          header.classList.remove('scrolled');
        }
      });
      
      // Mobile menu toggle
      document.querySelector('.mobile-menu-toggle').addEventListener('click', function() {
        const nav = document.querySelector('.bloom-nav');
        const isExpanded = this.getAttribute('aria-expanded') === 'true';
        
        nav.classList.toggle('active');
        this.setAttribute('aria-expanded', !isExpanded);
      });
    });

    // Thêm CSS animation cho toast
    const style = document.createElement('style');
    style.textContent = `
      @keyframes slideIn {
        from { transform: translateX(100%); opacity: 0; }
        to { transform: translateX(0); opacity: 1; }
      }
      @keyframes slideOut {
        from { transform: translateX(0); opacity: 1; }
        to { transform: translateX(100%); opacity: 0; }
      }
    `;
    document.head.appendChild(style);
  </script>
</body>
</html>