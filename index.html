<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Bloom - Hoa tươi cao cấp</title>
  <meta name="description" content="Bloom - Shop hoa tươi cao cấp với những bó hoa, lẵng hoa và kệ hoa đẹp nhất. Lan tỏa hương sắc thiên nhiên.">
  <link rel="stylesheet" href="style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet">
  <link rel="preload" href="images/hoa1.jpg" as="image">
  <link rel="preload" href="images/hoa2.jpg" as="image">
</head>
<body>
  <!-- SITE WRAPPER -->
  <div class="site-wrapper">

    <!-- HEADER -->
    <header class="bloom-header">
      <div class="bloom-container">
        <div class="bloom-logo" aria-label="Bloom - Trở về trang chủ">
          <a href="index.html" aria-label="Bloom - Trở về trang chủ"></a>
          <svg class="logo-icon" viewBox="0 0 100 100" fill="none" aria-hidden="true">
            <circle cx="50" cy="50" r="45" fill="#2e7d68" opacity="0.9"/>
            <path d="M50 20 C60 15, 75 25, 75 40 C75 55, 60 65, 50 70 C40 65, 25 55, 25 40 C25 25, 40 15, 50 20" fill="#eaf8f0"/>
            <circle cx="40" cy="35" r="8" fill="#b19cd9"/>
            <circle cx="60" cy="35" r="8" fill="#b19cd9"/>
            <circle cx="50" cy="50" r="12" fill="#9370db"/>
            <path d="M50 70 L45 85 L55 85 Z" fill="#2e7d68"/>
          </svg>
          <span>Bloom</span>
        </div>

        <nav class="bloom-nav" aria-label="Menu chính">
          <!-- THANH SEARCH TRÊN HEADER -->
          <div class="header-search">
            <input 
              type="text" 
              placeholder="Nhập tên sản phẩm..." 
              id="header-search-input"
              aria-label="Tìm kiếm sản phẩm"
            >
            <button class="header-search-btn" onclick="redirectToSearch()" aria-label="Tìm kiếm">
              <i class="fas fa-search"></i>
            </button>
          </div>
          
          <a href="2_DangNhap.html" title="Đăng nhập" aria-label="Đăng nhập" class="login-link">
            <i class="fa-regular fa-circle-user" aria-hidden="true"></i>
            <span>Đăng nhập</span>
          </a>
        </nav>
        
        <!-- Menu mobile -->
        <button class="mobile-menu-toggle" aria-label="Toggle menu" aria-expanded="false">
          <i class="fas fa-bars" aria-hidden="true"></i>
        </button>
      </div>
    </header>

    <!-- ==== HERO ==== -->
    <section class="hero" aria-labelledby="hero-title">
      <div class="hero-content">
        <h1 id="hero-title">Lan tỏa hương sắc thiên nhiên</h1>
        <p>Những bó hoa Bloom mang hơi thở của sự tinh tế, thuần khiết và chân thành. </p>
        <button class="btn-hero" onclick="scrollToProducts()">Khám phá ngay</button>
      </div>
    </section>

    <!-- DANH MỤC -->
    <section class="categories container" aria-labelledby="categories-title">
      <h2 id="categories-title" class="visually-hidden">Danh mục sản phẩm</h2>
      <ul role="tablist">
        <li role="tab" aria-selected="true" class="active">
          <a href="#all-products" onclick="filterProducts('all')">Tất cả sản phẩm</a>
        </li>
        <li role="tab" aria-selected="false">
          <a href="#bouquets" onclick="filterProducts('bo-hoa')">Bó hoa</a>
        </li>
        <li role="tab" aria-selected="false">
          <a href="#baskets" onclick="filterProducts('lang-hoa')">Lẵng hoa</a>
        </li>
        <li role="tab" aria-selected="false">
          <a href="#stands" onclick="filterProducts('ke-hoa')">Kệ hoa</a>
        </li>
      </ul>
    </section>

    <!-- SẢN PHẨM MẶC ĐỊNH -->
    <main id="products" class="container" aria-labelledby="products-title">
      <h2 id="products-title" class="visually-hidden">Sản phẩm nổi bật</h2>
      <div class="product-grid" id="default-products" role="list" aria-label="Danh sách sản phẩm">
        <!-- Sản phẩm sẽ được render bằng JavaScript -->
      </div>
    </main>

    <!-- PHÂN TRANG CHO SẢN PHẨM MẶC ĐỊNH -->
    <div class="pagination container" id="default-pagination" aria-label="Phân trang sản phẩm">
      <!-- Phân trang sẽ được render bằng JavaScript -->
    </div>

    <!-- FOOTER -->
    <footer class="site-footer" aria-labelledby="footer-heading">
      <div class="container footer-inner">
        <h2 id="footer-heading" class="visually-hidden">Thông tin liên hệ</h2>
        <div class="footer-main">
          <div class="footer-brand">
            <div class="footer-logo">
              <svg width="60" height="60" viewBox="0 0 100 100" fill="none" aria-hidden="true">
                <circle cx="50" cy="50" r="45" fill="#2e7d68" opacity="0.9"/>
                <path d="M50 20 C60 15, 75 25, 75 40 C75 55, 60 65, 50 70 C40 65, 25 55, 25 40 C25 25, 40 15, 50 20" fill="#eaf8f0"/>
                <circle cx="40" cy="35" r="8" fill="#b19cd9"/>
                <circle cx="60" cy="35" r="8" fill="#b19cd9"/>
                <circle cx="50" cy="50" r="12" fill="#9370db"/>
                <path d="M50 70 L45 85 L55 85 Z" fill="#2e7d68"/>
              </svg>
              <span>Bloom</span>
            </div>
            <p class="footer-tagline">Lan tỏa hương sắc thiên nhiên</p>
          </div>

          <div class="footer-contact">
            <h3>Thông Tin Liên Hệ</h3>
            <div class="contact-info">
              <div class="contact-item">
                <i class="fas fa-globe" aria-hidden="true"></i>
                <span>bloom.vn</span>
              </div>
              <div class="contact-item">
                <i class="fas fa-map-marker-alt" aria-hidden="true"></i>
                <span>123 Đường Hoa, Quận 1, TP.HCM</span>
              </div>
              <div class="contact-item">
                <i class="fas fa-phone" aria-hidden="true"></i>
                <a href="tel:+84901234567">090 123 4567</a>
              </div>
              <div class="contact-item">
                <i class="fas fa-envelope" aria-hidden="true"></i>
                <a href="mailto:info@bloom.vn">info@bloom.vn</a>
              </div>
              <div class="contact-item">
                <i class="fas fa-clock" aria-hidden="true"></i>
                <span>T2 – CN: 8h30 – 21h00</span>
              </div>
            </div>
          </div>
        </div>
        
        <div class="footer-bottom">
          <p>&copy; 2024 Bloom - Shop hoa tươi. All rights reserved.</p>
        </div>
      </div>
    </footer>

  </div> <!-- /site-wrapper -->

  <!-- JAVASCRIPT -->
  <script>
    // Dữ liệu mẫu cho sản phẩm - THÊM NHIỀU SẢN PHẨM HƠN
    const sampleProducts = [
      {
        id: 1,
        name: "Nhiệt Ái",
        price: 700000,
        category: "bo-hoa",
        image: "images/hoa1.jpg",
        description: "Bó hoa hồng đỏ thể hiện trọn vẹn sự mãnh liệt và lãng mạn của tình yêu",
        popular: true
      },
      {
        id: 2,
        name: "Peach",
        price: 770000,
        category: "bo-hoa",
        image: "images/hoa2.jpg",
        description: "Bó hoa hồng phấn dịu dàng và thanh lịch, hoàn hảo cho những dịp đặc biệt",
        popular: true
      },
      {
        id: 3,
        name: "Blueberry",
        price: 250000,
        category: "bo-hoa",
        image: "images/hoa3.jpg",
        description: "Sắc tím quyến rũ và bí ẩn, phù hợp cho những người yêu thích sự độc đáo",
        popular: false
      },
      {
        id: 4,
        name: "Lemon",
        price: 650000,
        category: "bo-hoa",
        image: "images/hoa4.jpg",
        description: "Bó hoa tươi sáng và tràn đầy năng lượng với sắc vàng rực rỡ",
        popular: true
      },
      {
        id: 5,
        name: "Vườn Xuân Ca",
        price: 670000,
        category: "bo-hoa",
        image: "images/hoa5.jpg",
        description: "Sự kết hợp hài hòa của nhiều loại hoa tạo nên vẻ đẹp tự nhiên và tinh tế",
        popular: false
      },
      {
        id: 6,
        name: "Hồng Mộng",
        price: 550000,
        category: "bo-hoa",
        image: "images/hoa1.jpg",
        description: "Bó hoa hồng phấn dịu dàng như giấc mơ ngọt ngào",
        popular: true
      },
      {
        id: 7,
        name: "Tím Thủy Chung",
        price: 480000,
        category: "bo-hoa",
        image: "images/hoa2.jpg",
        description: "Sắc tím thủy chung, biểu tượng của tình yêu vĩnh cửu",
        popular: false
      },
      {
        id: 8,
        name: "Sunshine",
        price: 720000,
        category: "bo-hoa",
        image: "images/hoa3.jpg",
        description: "Bó hoa rực rỡ như ánh nắng mặt trời, mang lại năng lượng tích cực",
        popular: true
      },
      {
        id: 9,
        name: "Shimmer Grace",
        price: 1150000,
        category: "lang-hoa",
        image: "images/langhoa1.webp",
        description: "Lẵng hoa trắng tinh khôi và thanh khiết, sang trọng cho không gian hiện đại",
        popular: true
      },
      {
        id: 10,
        name: "BlueSky",
        price: 1450000,
        category: "lang-hoa",
        image: "images/langhoa2.jpg",
        description: "Thiết kế độc đáo với tông màu xanh dịu mát, mang đến cảm giác bình yên",
        popular: false
      },
      {
        id: 11,
        name: "Sen Xanh",
        price: 1500000,
        category: "lang-hoa",
        image: "images/langhoa3.png",
        description: "Lẵng hoa sen thanh tao và quý phái, lấy cảm hứng từ nghệ thuật truyền thống",
        popular: true
      },
      {
        id: 12,
        name: "Sắc Màu",
        price: 3500000,
        category: "ke-hoa",
        image: "images/kehoa1.jpg",
        description: "Kệ hoa đa sắc màu rực rỡ, tạo điểm nhấn ấn tượng cho không gian rộng",
        popular: true
      },
      {
        id: 13,
        name: "Hồng Phát",
        price: 1900000,
        category: "ke-hoa",
        image: "images/kehoa2.jpg",
        description: "Kệ hoa mang đến may mắn và tài lộc, thiết kế tinh xảo và ý nghĩa",
        popular: false
      },
      {
        id: 14,
        name: "Tương Lai",
        price: 2100000,
        category: "ke-hoa",
        image: "images/kehoa3.jpg",
        description: "Kệ hoa hiện đại hướng đến tương lai, phù hợp với không gian đương đại",
        popular: true
      },
      {
        id: 15,
        name: "Phú Quý",
        price: 2800000,
        category: "ke-hoa",
        image: "images/kehoa1.jpg",
        description: "Kệ hoa sang trọng thể hiện đẳng cấp và sự thịnh vượng",
        popular: true
      },
      {
        id: 16,
        name: "Spring Bloom",
        price: 890000,
        category: "bo-hoa",
        image: "images/hoa2.jpg",
        description: "Bó hoa mùa xuân tươi mới với sắc hồng và trắng tinh khôi",
        popular: false
      },
      {
        id: 17,
        name: "Royal Elegance",
        price: 1250000,
        category: "lang-hoa",
        image: "images/langhoa3.png",
        description: "Lẵng hoa hoàng gia với thiết kế tinh tế và sang trọng",
        popular: true
      },
      {
        id: 18,
        name: "Golden Harvest",
        price: 3200000,
        category: "ke-hoa",
        image: "images/hoa1.jpg",
        description: "Kệ hoa mùa thu với sắc vàng rực rỡ, mang đến không gian ấm áp",
        popular: false
      }
    ];

    // Biến toàn cục
    let currentCategory = 'all';
    let currentSort = 'popular';

    // Cấu hình phân trang
    const paginationConfig = {
      currentPage: 1,
      itemsPerPage: 12, // Hiển thị 12 sản phẩm mỗi trang cho "Tất cả sản phẩm"
      itemsPerPageCategory: 3, // Hiển thị 3 sản phẩm mỗi trang cho các danh mục khác
      totalPages: 1
    };

    // Hàm tiện ích
    function scrollToProducts() {
      document.getElementById('products').scrollIntoView({ 
        behavior: 'smooth',
        block: 'start'
      });
    }

    function handleImageError(img) {
      img.src = 'https://images.unsplash.com/photo-1487070183333-13a8a54b5f14?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80';
      img.alt = 'Hình ảnh sản phẩm tạm thời không khả dụng';
    }

    // Hàm chuyển hướng đến trang tìm kiếm
    function redirectToSearch() {
      const searchInput = document.getElementById('header-search-input');
      const searchTerm = searchInput.value.trim();
      
      if (searchTerm) {
        window.location.href = `13_TimKiem.html?q=${encodeURIComponent(searchTerm)}`;
      } else {
        window.location.href = '13_TimKiem.html';
      }
    }

    // Hàm chuyển hướng đến trang đăng nhập
    function redirectToLogin() {
      window.location.href = '2_DangNhap.html';
    }

    // Hàm lấy số sản phẩm mỗi trang dựa trên danh mục
    function getItemsPerPage() {
      return currentCategory === 'all' 
        ? paginationConfig.itemsPerPage 
        : paginationConfig.itemsPerPageCategory;
    }

    // Hàm tạo danh sách sản phẩm (lặp lại cho danh mục có ít sản phẩm)
    function createPaginatedProducts(originalProducts, page = 1) {
      const itemsPerPage = getItemsPerPage();
      const startIndex = (page - 1) * itemsPerPage;
      const endIndex = startIndex + itemsPerPage;
      
      // Nếu là danh mục "Tất cả sản phẩm", không lặp lại
      if (currentCategory === 'all') {
        return originalProducts.slice(startIndex, endIndex);
      }
      
      // Nếu là danh mục khác và không đủ sản phẩm, lặp lại danh sách
      if (originalProducts.length === 0) {
        return [];
      }
      
      const paginatedProducts = [];
      for (let i = startIndex; i < endIndex; i++) {
        const originalIndex = i % originalProducts.length;
        const product = {...originalProducts[originalIndex]};
        // Tạo ID duy nhất để tránh trùng lặp
        product.tempId = `${product.id}-${i}`;
        paginatedProducts.push(product);
      }
      
      return paginatedProducts;
    }

    // Hàm tính tổng số trang
    function calculateTotalPages(products) {
      const itemsPerPage = getItemsPerPage();
      
      if (currentCategory === 'all') {
        // Cho "Tất cả sản phẩm": tính toán thực tế
        return Math.ceil(products.length / itemsPerPage);
      } else {
        // Cho các danh mục khác: luôn có ít nhất 3 trang
        const actualPages = Math.ceil(products.length / itemsPerPage);
        return Math.max(actualPages, 3);
      }
    }

    // Hàm cập nhật phân trang
    function updatePagination(products, paginationId, currentPage = 1) {
      const totalPages = calculateTotalPages(products);
      
      paginationConfig.totalPages = totalPages;
      paginationConfig.currentPage = currentPage;
      
      const paginationContainer = document.getElementById(paginationId);
      
      // Ẩn phân trang nếu chỉ có 1 trang (chỉ cho "Tất cả sản phẩm")
      if (totalPages <= 1 && currentCategory === 'all') {
        paginationContainer.style.display = 'none';
        return;
      }
      
      // Luôn hiển thị phân trang cho các danh mục khác
      paginationContainer.style.display = 'flex';
      renderPagination(paginationContainer, currentPage, totalPages, paginationId);
    }

    // Hàm render phân trang
    function renderPagination(container, currentPage, totalPages, paginationId) {
      let paginationHTML = '';
      
      // Nút Previous
      if (currentPage > 1) {
        paginationHTML += `
          <a href="#" class="page-nav" aria-label="Trang trước" onclick="changePage(${currentPage - 1}, '${paginationId}')">
            <i class="fas fa-chevron-left" aria-hidden="true"></i>
          </a>
        `;
      } else {
        paginationHTML += `
          <a href="#" class="page-nav disabled" aria-label="Trang trước" aria-disabled="true">
            <i class="fas fa-chevron-left" aria-hidden="true"></i>
          </a>
        `;
      }
      
      // Các số trang
      const maxVisiblePages = 5;
      let startPage = Math.max(1, currentPage - Math.floor(maxVisiblePages / 2));
      let endPage = Math.min(totalPages, startPage + maxVisiblePages - 1);
      
      // Điều chỉnh nếu gần cuối
      if (endPage - startPage + 1 < maxVisiblePages) {
        startPage = Math.max(1, endPage - maxVisiblePages + 1);
      }
      
      // Hiển thị trang đầu nếu cần
      if (startPage > 1) {
        paginationHTML += `
          <a href="#" class="page-number" aria-label="Trang 1" onclick="changePage(1, '${paginationId}')">1</a>
        `;
        if (startPage > 2) {
          paginationHTML += `<span class="page-ellipsis" aria-hidden="true">...</span>`;
        }
      }
      
      // Các trang chính
      for (let i = startPage; i <= endPage; i++) {
        const isActive = i === currentPage;
        paginationHTML += `
          <a href="#" class="page-number ${isActive ? 'active' : ''}" 
             aria-label="Trang ${i}" ${isActive ? 'aria-current="page"' : ''}
             onclick="changePage(${i}, '${paginationId}')">
            ${i}
          </a>
        `;
      }
      
      // Hiển thị trang cuối nếu cần
      if (endPage < totalPages) {
        if (endPage < totalPages - 1) {
          paginationHTML += `<span class="page-ellipsis" aria-hidden="true">...</span>`;
        }
        paginationHTML += `
          <a href="#" class="page-number" aria-label="Trang ${totalPages}" onclick="changePage(${totalPages}, '${paginationId}')">${totalPages}</a>
        `;
      }
      
      // Nút Next
      if (currentPage < totalPages) {
        paginationHTML += `
          <a href="#" class="page-nav" aria-label="Trang sau" onclick="changePage(${currentPage + 1}, '${paginationId}')">
            <i class="fas fa-chevron-right" aria-hidden="true"></i>
          </a>
        `;
      } else {
        paginationHTML += `
          <a href="#" class="page-nav disabled" aria-label="Trang sau" aria-disabled="true">
            <i class="fas fa-chevron-right" aria-hidden="true"></i>
          </a>
        `;
      }
      
      container.innerHTML = paginationHTML;
    }

    // Hàm chuyển trang
    function changePage(page, paginationId) {
      paginationConfig.currentPage = page;
      
      // Cập nhật sản phẩm theo trang
      renderDefaultProducts();
      updatePagination(
        getCurrentProducts(), 
        'default-pagination', 
        page
      );
      
      // Scroll lên đầu trang sản phẩm
      document.getElementById('products').scrollIntoView({
        behavior: 'smooth',
        block: 'start'
      });
    }

    // Hàm lấy sản phẩm hiện tại theo danh mục
    function getCurrentProducts() {
      return currentCategory === 'all' 
        ? sampleProducts 
        : sampleProducts.filter(p => p.category === currentCategory);
    }

    // Hàm render sản phẩm mặc định
    function renderDefaultProducts() {
      const container = document.getElementById('default-products');
      const allProducts = getCurrentProducts();
      const paginatedProducts = createPaginatedProducts(allProducts, paginationConfig.currentPage);
      
      container.innerHTML = '';
      paginatedProducts.forEach(product => {
        const productElement = createProductElement(product);
        container.appendChild(productElement);
      });
      
      // Cập nhật phân trang
      updatePagination(allProducts, 'default-pagination', paginationConfig.currentPage);
    }

    // Hàm lọc sản phẩm theo danh mục
    function filterProducts(category) {
      currentCategory = category;
      paginationConfig.currentPage = 1; // Reset về trang 1 khi chuyển danh mục
      
      // Cập nhật trạng thái active cho tab
      document.querySelectorAll('.categories li').forEach(li => {
        li.setAttribute('aria-selected', 'false');
        li.classList.remove('active');
      });
      
      event.currentTarget.parentElement.setAttribute('aria-selected', 'true');
      event.currentTarget.parentElement.classList.add('active');
      
      renderDefaultProducts();
    }

    // Hàm tạo HTML cho sản phẩm
    function createProductElement(product) {
      const productDiv = document.createElement('article');
      productDiv.className = 'product';
      productDiv.setAttribute('role', 'listitem');
      productDiv.innerHTML = `
        <a href="4_ChiTietSanPham.html">
          <img 
            src="${product.image}" 
            alt="${product.name} - ${product.description}" 
            loading="lazy"
            onerror="handleImageError(this)"
          >
        </a>
        <h3>${product.name}</h3>
        <p class="price">${product.price.toLocaleString('vi-VN')}₫</p>
        <button class="btn-outline" onclick="redirectToLogin()">
          Đăng nhập để mua
        </button>
      `;
      return productDiv;
    }

    // JavaScript chính khi trang load
    document.addEventListener('DOMContentLoaded', function() {
      // Render sản phẩm mặc định
      renderDefaultProducts();

      // Header scroll effect
      window.addEventListener('scroll', () => {
        const header = document.querySelector('.bloom-header');
        if (window.scrollY > 50) {
          header.classList.add('scrolled');
        } else {
          header.classList.remove('scrolled');
        }
      });
      
      // Mobile menu toggle
      document.querySelector('.mobile-menu-toggle').addEventListener('click', function() {
        const nav = document.querySelector('.bloom-nav');
        const isExpanded = this.getAttribute('aria-expanded') === 'true';
        
        nav.classList.toggle('active');
        this.setAttribute('aria-expanded', !isExpanded);
      });

      // Cho phép nhấn Enter trên header search
      document.getElementById('header-search-input').addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
          redirectToSearch();
        }
      });
    });
  </script>
</body>
</html>