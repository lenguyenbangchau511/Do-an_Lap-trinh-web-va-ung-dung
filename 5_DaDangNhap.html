<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Bloom - C·ª≠a h√†ng hoa t∆∞∆°i</title>
  <link rel="stylesheet" href="main.css">
  <link rel="stylesheet" href="5_DaDangNhap.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&family=Playfair+Display:wght@600&display=swap" rel="stylesheet">
</head>
<body>
  <!-- SITE WRAPPER -->
  <div class="site-wrapper">

    <!-- HEADER ƒê√É ƒêƒÇNG NH·∫¨P -->
    <header class="bloom-header">
      <div class="bloom-container">
        <div class="bloom-logo">
          <svg class="logo-icon" viewBox="0 0 100 100" fill="none" aria-hidden="true">
            <circle cx="50" cy="50" r="45" fill="#2e7d68" opacity="0.9"/>
            <path d="M50 20 C60 15, 75 25, 75 40 C75 55, 60 65, 50 70 C40 65, 25 55, 25 40 C25 25, 40 15, 50 20" fill="#eaf8f0"/>
            <circle cx="40" cy="35" r="8" fill="#b19cd9"/>
            <circle cx="60" cy="35" r="8" fill="#b19cd9"/>
            <circle cx="50" cy="50" r="12" fill="#9370db"/>
            <path d="M50 70 L45 85 L55 85 Z" fill="#2e7d68"/>
          </svg>
          <span>Bloom</span>
        </div>

        <nav class="bloom-nav" aria-label="Menu ch√≠nh">
          <a href="5_DaDangNhap.html" aria-current="page">Trang ch·ªß</a>
          <a href="6_GioHang.html" title="Gi·ªè h√†ng" aria-label="Gi·ªè h√†ng">
            <i class="fa-solid fa-bag-shopping" aria-hidden="true"></i>
          </a>
          <a href="9_LichSuDonHang.html" title="L·ªãch s·ª≠ ƒë∆°n h√†ng" aria-label="L·ªãch s·ª≠ ƒë∆°n h√†ng">
            <i class="fa-regular fa-clock" aria-hidden="true"></i>
          </a>
          <a href="3_ThongTinCaNhan.html" title="T√†i kho·∫£n" aria-label="T√†i kho·∫£n">
            <i class="fa-regular fa-circle-user" aria-hidden="true"></i>
          </a>
          <a href="index.html" class="logout-btn" title="ƒêƒÉng xu·∫•t" aria-label="ƒêƒÉng xu·∫•t">
            <i class="fa-solid fa-right-from-bracket" aria-hidden="true"></i>
          </a>
        </nav>
        
        <!-- Menu mobile -->
        <button class="mobile-menu-toggle" aria-label="Toggle menu" aria-expanded="false">
          <i class="fas fa-bars" aria-hidden="true"></i>
        </button>
      </div>
    </header>

    <!-- L·ªúI CH√ÄO KH√ÅCH H√ÄNG ƒê√É ƒêƒÇNG NH·∫¨P -->
    <section class="welcome-section" aria-labelledby="welcome-heading">
      <div class="container">
        <div class="welcome-content">
          <h1 id="welcome-heading">Ch√†o m·ª´ng tr·ªü l·∫°i, <span class="user-name">Nguy·ªÖn VƒÉn A</span>! üå∏</h1>
          <p>H√¥m nay b·∫°n mu·ªën mang ƒëi·ªÅu g√¨ ƒë·∫∑c bi·ªát ƒë·∫øn v·ªõi ng∆∞·ªùi th∆∞∆°ng y√™u?</p>
        </div>
      </div>
    </section>

    <!-- ==== HERO ==== -->
    <section class="hero" aria-labelledby="hero-title">
      <div class="hero-content">
        <h1 id="hero-title">Lan t·ªèa h∆∞∆°ng s·∫Øc thi√™n nhi√™n</h1>
        <p>Nh·ªØng b√≥ hoa Bloom mang h∆°i th·ªü c·ªßa s·ª± tinh t·∫ø, thu·∫ßn khi·∫øt v√† ch√¢n th√†nh.</p>
        <button class="btn-hero" onclick="scrollToProducts()">Kh√°m ph√° ngay</button>
      </div>
    </section>

    <!-- DANH M·ª§C -->
    <section class="categories container" aria-labelledby="categories-title">
      <h2 id="categories-title" class="visually-hidden">Danh m·ª•c s·∫£n ph·∫©m</h2>
      <ul role="tablist">
        <li role="tab" aria-selected="true" class="active">
          <a href="#all-products" onclick="filterProducts('all')">T·∫•t c·∫£ s·∫£n ph·∫©m</a>
        </li>
        <li role="tab" aria-selected="false">
          <a href="#bouquets" onclick="filterProducts('bo-hoa')">B√≥ hoa</a>
        </li>
        <li role="tab" aria-selected="false">
          <a href="#baskets" onclick="filterProducts('lang-hoa')">L·∫µng hoa</a>
        </li>
        <li role="tab" aria-selected="false">
          <a href="#stands" onclick="filterProducts('ke-hoa')">K·ªá hoa</a>
        </li>
      </ul>
    </section>

    <!-- T√åM KI·∫æM N√ÇNG CAO -->
    <section class="advanced-search container" aria-labelledby="search-title">
      <h2 id="search-title" class="visually-hidden">T√¨m ki·∫øm s·∫£n ph·∫©m</h2>
      
      <div class="search-toggle" role="tablist">
        <button class="toggle-btn active" data-tab="basic" role="tab" aria-selected="true" aria-controls="basic-search">
          T√¨m ki·∫øm c∆° b·∫£n
        </button>
        <button class="toggle-btn" data-tab="advanced" role="tab" aria-selected="false" aria-controls="advanced-search">
          T√¨m ki·∫øm n√¢ng cao
        </button>
      </div>

      <!-- T√¨m ki·∫øm c∆° b·∫£n -->
      <div class="search-tab active" id="basic-search" role="tabpanel" aria-labelledby="basic-search-tab">
        <div class="basic-search-form">
          <div class="search-input-group">
            <input 
              type="text" 
              placeholder="Nh·∫≠p t√™n s·∫£n ph·∫©m b·∫°n mu·ªën t√¨m..." 
              class="search-input" 
              id="basic-search-input"
              aria-label="T√¨m ki·∫øm s·∫£n ph·∫©m"
            >
            <button class="search-btn" id="basic-search-btn" aria-label="T√¨m ki·∫øm">
              <i class="fas fa-search" aria-hidden="true"></i>
              T√¨m ki·∫øm
            </button>
          </div>
        </div>
      </div>

      <!-- T√¨m ki·∫øm n√¢ng cao -->
      <div class="search-tab" id="advanced-search" role="tabpanel" aria-labelledby="advanced-search-tab" hidden>
        <form class="advanced-search-form" id="advanced-search-form">
          <div class="search-row">
            <div class="search-group">
              <label for="product-name">T√™n s·∫£n ph·∫©m</label>
              <input type="text" id="product-name" placeholder="Nh·∫≠p t√™n s·∫£n ph·∫©m...">
            </div>
            
            <div class="search-group">
              <label for="category">Ph√¢n lo·∫°i</label>
              <select id="category">
                <option value="">T·∫•t c·∫£ ph√¢n lo·∫°i</option>
                <option value="bo-hoa">B√≥ hoa</option>
                <option value="lang-hoa">L·∫µng hoa</option>
                <option value="ke-hoa">K·ªá hoa</option>
              </select>
            </div>
          </div>

          <div class="search-row">
            <div class="search-group">
              <label for="min-price">Gi√° t·ª´</label>
              <div class="price-input-group">
                <input type="number" id="min-price" placeholder="0" min="0" aria-label="Gi√° t·ªëi thi·ªÉu">
                <span class="currency">‚Ç´</span>
              </div>
            </div>
            
            <div class="search-group">
              <label for="max-price">ƒê·∫øn</label>
              <div class="price-input-group">
                <input type="number" id="max-price" placeholder="10,000,000" min="0" aria-label="Gi√° t·ªëi ƒëa">
                <span class="currency">‚Ç´</span>
              </div>
            </div>
          </div>

          <div class="search-actions">
            <button type="reset" class="btn-secondary" id="reset-btn">
              <i class="fas fa-redo" aria-hidden="true"></i>
              ƒê·∫∑t l·∫°i
            </button>
            <button type="submit" class="search-submit" id="advanced-search-btn">
              <i class="fas fa-search" aria-hidden="true"></i>
              T√¨m ki·∫øm
            </button>
          </div>
        </form>
      </div>
    </section>

    <!-- K·∫æT QU·∫¢ T√åM KI·∫æM -->
    <section class="search-results container" id="search-results" aria-labelledby="search-results-title" hidden>
      <div class="results-header">
        <h2 id="search-results-title">K·∫øt qu·∫£ t√¨m ki·∫øm</h2>
        <div class="results-info">
          <span class="results-count">T√¨m th·∫•y <strong id="results-count">0</strong> s·∫£n ph·∫©m</span>
          <div class="sort-options">
            <label for="sort-by">S·∫Øp x·∫øp:</label>
            <select id="sort-by" aria-label="S·∫Øp x·∫øp k·∫øt qu·∫£">
              <option value="popular">Ph·ªï bi·∫øn nh·∫•t</option>
              <option value="newest">M·ªõi nh·∫•t</option>
              <option value="price-low">Gi√° th·∫•p ƒë·∫øn cao</option>
              <option value="price-high">Gi√° cao ƒë·∫øn th·∫•p</option>
              <option value="name">T√™n A-Z</option>
            </select>
          </div>
        </div>
      </div>

      <div class="product-grid" id="search-results-grid" role="list" aria-label="Danh s√°ch s·∫£n ph·∫©m t√¨m th·∫•y">
        <!-- K·∫øt qu·∫£ t√¨m ki·∫øm s·∫Ω hi·ªÉn th·ªã ·ªü ƒë√¢y -->
      </div>

      <!-- PH√ÇN TRANG -->
      <nav class="pagination" id="search-pagination" aria-label="Ph√¢n trang k·∫øt qu·∫£ t√¨m ki·∫øm">
        <a href="#" class="page-nav disabled" aria-label="Trang tr∆∞·ªõc" aria-disabled="true">
          <i class="fas fa-chevron-left" aria-hidden="true"></i>
        </a>
        <a href="#" class="page-number active" aria-label="Trang 1" aria-current="page">1</a>
        <a href="#" class="page-number" aria-label="Trang 2">2</a>
        <a href="#" class="page-number" aria-label="Trang 3">3</a>
        <span class="page-ellipsis" aria-hidden="true">...</span>
        <a href="#" class="page-number" aria-label="Trang 8">8</a>
        <a href="#" class="page-nav" aria-label="Trang sau">
          <i class="fas fa-chevron-right" aria-hidden="true"></i>
        </a>
      </nav>
    </section>

    <!-- S·∫¢N PH·∫®M M·∫∂C ƒê·ªäNH -->
    <main id="products" class="container" aria-labelledby="products-title">
      <h2 id="products-title" class="visually-hidden">S·∫£n ph·∫©m n·ªïi b·∫≠t</h2>
      <div class="product-grid" id="default-products" role="list" aria-label="Danh s√°ch s·∫£n ph·∫©m">
        <!-- S·∫£n ph·∫©m s·∫Ω ƒë∆∞·ª£c render b·∫±ng JavaScript -->
      </div>
    </main>

    <!-- PH√ÇN TRANG S·∫¢N PH·∫®M -->
    <div class="pagination" id="default-pagination" aria-label="Ph√¢n trang s·∫£n ph·∫©m">
        <a href="#" class="page-nav disabled" aria-label="Trang tr∆∞·ªõc" aria-disabled="true">
            <i class="fas fa-chevron-left" aria-hidden="true"></i>
        </a>
        <a href="#" class="page-number active" aria-label="Trang 1" aria-current="page">1</a>
        <a href="#" class="page-number" aria-label="Trang 2">2</a>
        <a href="#" class="page-number" aria-label="Trang 3">3</a>
        <span class="page-ellipsis" aria-hidden="true">...</span>
        <a href="#" class="page-number" aria-label="Trang 8">8</a>
        <a href="#" class="page-nav" aria-label="Trang sau">
            <i class="fas fa-chevron-right" aria-hidden="true"></i>
        </a>
    </div>

    <!-- FOOTER -->
    <footer class="site-footer" aria-labelledby="footer-heading">
      <div class="container footer-inner">
        <h2 id="footer-heading" class="visually-hidden">Th√¥ng tin li√™n h·ªá</h2>
        <div class="footer-main">
          <div class="footer-brand">
            <div class="footer-logo">
              <svg width="60" height="60" viewBox="0 0 100 100" fill="none" aria-hidden="true">
                <circle cx="50" cy="50" r="45" fill="#2e7d68" opacity="0.9"/>
                <path d="M50 20 C60 15, 75 25, 75 40 C75 55, 60 65, 50 70 C40 65, 25 55, 25 40 C25 25, 40 15, 50 20" fill="#eaf8f0"/>
                <circle cx="40" cy="35" r="8" fill="#b19cd9"/>
                <circle cx="60" cy="35" r="8" fill="#b19cd9"/>
                <circle cx="50" cy="50" r="12" fill="#9370db"/>
                <path d="M50 70 L45 85 L55 85 Z" fill="#2e7d68"/>
              </svg>
              <span>Bloom</span>
            </div>
            <p class="footer-tagline">Lan t·ªèa h∆∞∆°ng s·∫Øc thi√™n nhi√™n</p>
          </div>

          <div class="footer-contact">
            <h3>Th√¥ng Tin Li√™n H·ªá</h3>
            <div class="contact-info">
              <div class="contact-item">
                <i class="fas fa-globe" aria-hidden="true"></i>
                <span>bloom.vn</span>
              </div>
              <div class="contact-item">
                <i class="fas fa-map-marker-alt" aria-hidden="true"></i>
                <span>123 ƒê∆∞·ªùng Hoa, Qu·∫≠n 1, TP.HCM</span>
              </div>
              <div class="contact-item">
                <i class="fas fa-phone" aria-hidden="true"></i>
                <a href="tel:+84901234567">090 123 4567</a>
              </div>
              <div class="contact-item">
                <i class="fas fa-envelope" aria-hidden="true"></i>
                <a href="mailto:info@bloom.vn">info@bloom.vn</a>
              </div>
              <div class="contact-item">
                <i class="fas fa-clock" aria-hidden="true"></i>
                <span>T2 ‚Äì CN: 8h30 ‚Äì 21h00</span>
              </div>
            </div>
          </div>
        </div>
        
        <div class="footer-bottom">
          <p>&copy; 2024 Bloom - Shop hoa t∆∞∆°i. All rights reserved.</p>
        </div>
      </div>
    </footer>

  </div> <!-- /site-wrapper -->

  <!-- JAVASCRIPT -->
  <script>
    // D·ªØ li·ªáu m·∫´u cho s·∫£n ph·∫©m
    const sampleProducts = [
      {
        id: 1,
        name: "Nhi·ªát √Åi",
        price: 700000,
        category: "bo-hoa",
        image: "images/hoa1.jpg",
        description: "B√≥ hoa h·ªìng ƒë·ªè th·ªÉ hi·ªán tr·ªçn v·∫πn s·ª± m√£nh li·ªát v√† l√£ng m·∫°n c·ªßa t√¨nh y√™u",
        popular: true
      },
      {
        id: 2,
        name: "Peach",
        price: 770000,
        category: "bo-hoa",
        image: "images/hoa2.jpg",
        description: "B√≥ hoa h·ªìng ph·∫•n d·ªãu d√†ng v√† thanh l·ªãch, ho√†n h·∫£o cho nh·ªØng d·ªãp ƒë·∫∑c bi·ªát",
        popular: true
      },
      {
        id: 3,
        name: "Blueberry",
        price: 250000,
        category: "bo-hoa",
        image: "images/hoa3.jpg",
        description: "S·∫Øc t√≠m quy·∫øn r≈© v√† b√≠ ·∫©n, ph√π h·ª£p cho nh·ªØng ng∆∞·ªùi y√™u th√≠ch s·ª± ƒë·ªôc ƒë√°o",
        popular: false
      },
      {
        id: 4,
        name: "Lemon",
        price: 650000,
        category: "bo-hoa",
        image: "images/hoa4.jpg",
        description: "B√≥ hoa t∆∞∆°i s√°ng v√† tr√†n ƒë·∫ßy nƒÉng l∆∞·ª£ng v·ªõi s·∫Øc v√†ng r·ª±c r·ª°",
        popular: true
      },
      {
        id: 5,
        name: "V∆∞·ªùn Xu√¢n Ca",
        price: 670000,
        category: "bo-hoa",
        image: "images/hoa5.jpg",
        description: "S·ª± k·∫øt h·ª£p h√†i h√≤a c·ªßa nhi·ªÅu lo·∫°i hoa t·∫°o n√™n v·∫ª ƒë·∫πp t·ª± nhi√™n v√† tinh t·∫ø",
        popular: false
      },
      {
        id: 6,
        name: "Shimmer Grace",
        price: 1150000,
        category: "lang-hoa",
        image: "images/langhoa1.webp",
        description: "L·∫µng hoa tr·∫Øng tinh kh√¥i v√† thanh khi·∫øt, sang tr·ªçng cho kh√¥ng gian hi·ªán ƒë·∫°i",
        popular: true
      },
      {
        id: 7,
        name: "BlueSky",
        price: 1450000,
        category: "lang-hoa",
        image: "images/langhoa2.jpg",
        description: "Thi·∫øt k·∫ø ƒë·ªôc ƒë√°o v·ªõi t√¥ng m√†u xanh d·ªãu m√°t, mang ƒë·∫øn c·∫£m gi√°c b√¨nh y√™n",
        popular: false
      },
      {
        id: 8,
        name: "Sen Xanh",
        price: 1500000,
        category: "lang-hoa",
        image: "images/langhoa3.png",
        description: "L·∫µng hoa sen thanh tao v√† qu√Ω ph√°i, l·∫•y c·∫£m h·ª©ng t·ª´ ngh·ªá thu·∫≠t truy·ªÅn th·ªëng",
        popular: true
      },
      {
        id: 9,
        name: "S·∫Øc M√†u",
        price: 3500000,
        category: "ke-hoa",
        image: "images/kehoa1.jpg",
        description: "K·ªá hoa ƒëa s·∫Øc m√†u r·ª±c r·ª°, t·∫°o ƒëi·ªÉm nh·∫•n ·∫•n t∆∞·ª£ng cho kh√¥ng gian r·ªông",
        popular: true
      },
      {
        id: 10,
        name: "H·ªìng Ph√°t",
        price: 1900000,
        category: "ke-hoa",
        image: "images/kehoa2.jpg",
        description: "K·ªá hoa mang ƒë·∫øn may m·∫Øn v√† t√†i l·ªôc, thi·∫øt k·∫ø tinh x·∫£o v√† √Ω nghƒ©a",
        popular: false
      },
      {
        id: 11,
        name: "T∆∞∆°ng Lai",
        price: 2100000,
        category: "ke-hoa",
        image: "images/kehoa3.jpg",
        description: "K·ªá hoa hi·ªán ƒë·∫°i h∆∞·ªõng ƒë·∫øn t∆∞∆°ng lai, ph√π h·ª£p v·ªõi kh√¥ng gian ƒë∆∞∆°ng ƒë·∫°i",
        popular: true
      }
    ];

    // Bi·∫øn to√†n c·ª•c
    let searchTimeout;
    let currentCategory = 'all';
    let currentSort = 'popular';

    // C·∫•u h√¨nh ph√¢n trang
    const paginationConfig = {
      currentPage: 1,
      itemsPerPage: 8,
      totalPages: 1
    };

    // H√†m ti·ªán √≠ch
    function scrollToProducts() {
      document.getElementById('products').scrollIntoView({ 
        behavior: 'smooth',
        block: 'start'
      });
    }

    function handleImageError(img) {
      img.src = 'https://images.unsplash.com/photo-1487070183333-13a8a54b5f14?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80';
      img.alt = 'H√¨nh ·∫£nh s·∫£n ph·∫©m t·∫°m th·ªùi kh√¥ng kh·∫£ d·ª•ng';
    }

    // H√†m ph√¢n trang s·∫£n ph·∫©m
    function paginateProducts(products, page = 1) {
      const startIndex = (page - 1) * paginationConfig.itemsPerPage;
      const endIndex = startIndex + paginationConfig.itemsPerPage;
      return products.slice(startIndex, endIndex);
    }

    // H√†m c·∫≠p nh·∫≠t ph√¢n trang
    function updatePagination(products, paginationId, currentPage = 1) {
      const totalProducts = products.length;
      const totalPages = Math.ceil(totalProducts / paginationConfig.itemsPerPage);
      
      paginationConfig.totalPages = totalPages;
      paginationConfig.currentPage = currentPage;
      
      const paginationContainer = document.getElementById(paginationId);
      
      if (totalPages <= 1) {
        paginationContainer.style.display = 'none';
        return;
      }
      
      paginationContainer.style.display = 'flex';
      renderPagination(paginationContainer, currentPage, totalPages);
    }

    // H√†m render ph√¢n trang
    function renderPagination(container, currentPage, totalPages) {
      let paginationHTML = '';
      
      // N√∫t Previous
      if (currentPage > 1) {
        paginationHTML += `
          <a href="#" class="page-nav" aria-label="Trang tr∆∞·ªõc" onclick="changePage(${currentPage - 1})">
            <i class="fas fa-chevron-left" aria-hidden="true"></i>
          </a>
        `;
      } else {
        paginationHTML += `
          <a href="#" class="page-nav disabled" aria-label="Trang tr∆∞·ªõc" aria-disabled="true">
            <i class="fas fa-chevron-left" aria-hidden="true"></i>
          </a>
        `;
      }
      
      // C√°c s·ªë trang
      for (let i = 1; i <= totalPages; i++) {
        if (i === 1 || i === totalPages || (i >= currentPage - 1 && i <= currentPage + 1)) {
          const isActive = i === currentPage;
          paginationHTML += `
            <a href="#" class="page-number ${isActive ? 'active' : ''}" 
               aria-label="Trang ${i}" ${isActive ? 'aria-current="page"' : ''}
               onclick="changePage(${i})">
              ${i}
            </a>
          `;
        } else if (i === currentPage - 2 || i === currentPage + 2) {
          paginationHTML += `<span class="page-ellipsis" aria-hidden="true">...</span>`;
        }
      }
      
      // N√∫t Next
      if (currentPage < totalPages) {
        paginationHTML += `
          <a href="#" class="page-nav" aria-label="Trang sau" onclick="changePage(${currentPage + 1})">
            <i class="fas fa-chevron-right" aria-hidden="true"></i>
          </a>
        `;
      } else {
        paginationHTML += `
          <a href="#" class="page-nav disabled" aria-label="Trang sau" aria-disabled="true">
            <i class="fas fa-chevron-right" aria-hidden="true"></i>
          </a>
        `;
      }
      
      container.innerHTML = paginationHTML;
    }

    // H√†m chuy·ªÉn trang
    function changePage(page) {
      paginationConfig.currentPage = page;
      
      // C·∫≠p nh·∫≠t s·∫£n ph·∫©m theo trang
      if (document.getElementById('search-results').hidden) {
        // ƒêang ·ªü ch·∫ø ƒë·ªô xem s·∫£n ph·∫©m m·∫∑c ƒë·ªãnh
        renderDefaultProducts();
        updatePagination(
          getCurrentProducts(), 
          'default-pagination', 
          page
        );
      } else {
        // ƒêang ·ªü ch·∫ø ƒë·ªô t√¨m ki·∫øm
        const currentResults = getCurrentSearchResults();
        displaySearchResults(currentResults, currentSort, page);
      }
      
      // Scroll l√™n ƒë·∫ßu trang
      window.scrollTo({
        top: document.getElementById('products').offsetTop - 100,
        behavior: 'smooth'
      });
    }

    // H√†m l·∫•y s·∫£n ph·∫©m hi·ªán t·∫°i
    function getCurrentProducts() {
      return currentCategory === 'all' 
        ? sampleProducts 
        : sampleProducts.filter(p => p.category === currentCategory);
    }

    // H√†m l·∫•y k·∫øt qu·∫£ t√¨m ki·∫øm hi·ªán t·∫°i
    function getCurrentSearchResults() {
      const filters = getCurrentSearchFilters();
      return searchProducts(filters);
    }

    // H√†m l·∫•y b·ªô l·ªçc t√¨m ki·∫øm hi·ªán t·∫°i
    function getCurrentSearchFilters() {
      const activeTab = document.querySelector('.search-tab.active').id;
      
      if (activeTab === 'basic-search') {
        return {
          name: document.getElementById('basic-search-input').value.trim()
        };
      } else {
        return {
          name: document.getElementById('product-name').value.trim(),
          category: document.getElementById('category').value,
          minPrice: document.getElementById('min-price').value ? parseInt(document.getElementById('min-price').value) : null,
          maxPrice: document.getElementById('max-price').value ? parseInt(document.getElementById('max-price').value) : null
        };
      }
    }

    // H√†m t√¨m ki·∫øm s·∫£n ph·∫©m
    function searchProducts(filters) {
      return sampleProducts.filter(product => {
        // L·ªçc theo t√™n s·∫£n ph·∫©m
        if (filters.name && !product.name.toLowerCase().includes(filters.name.toLowerCase())) {
          return false;
        }
        
        // L·ªçc theo ph√¢n lo·∫°i
        if (filters.category && product.category !== filters.category) {
          return false;
        }
        
        // L·ªçc theo kho·∫£ng gi√°
        if (filters.minPrice && product.price < filters.minPrice) {
          return false;
        }
        if (filters.maxPrice && product.price > filters.maxPrice) {
          return false;
        }
        
        return true;
      });
    }

    // H√†m hi·ªÉn th·ªã k·∫øt qu·∫£ t√¨m ki·∫øm
    function displaySearchResults(products, sortBy = 'popular', page = 1) {
      const resultsContainer = document.getElementById('search-results-grid');
      const resultsCount = document.getElementById('results-count');
      const resultsSection = document.getElementById('search-results');
      const defaultProducts = document.getElementById('default-products');
      
      const sortedProducts = sortProducts(products, sortBy);
      const paginatedProducts = paginateProducts(sortedProducts, page);
      
      resultsCount.textContent = sortedProducts.length;
      resultsCount.setAttribute('aria-live', 'polite');
      
      resultsContainer.innerHTML = '';
      
      if (paginatedProducts.length === 0) {
        resultsContainer.innerHTML = `
          <div class="no-results">
            <i class="fas fa-search" aria-hidden="true"></i>
            <h3>Kh√¥ng t√¨m th·∫•y s·∫£n ph·∫©m ph√π h·ª£p</h3>
            <p>H√£y th·ª≠ ƒëi·ªÅu ch·ªânh ti√™u ch√≠ t√¨m ki·∫øm c·ªßa b·∫°n</p>
          </div>
        `;
        document.getElementById('search-pagination').style.display = 'none';
      } else {
        paginatedProducts.forEach(product => {
          const productElement = createProductElement(product);
          resultsContainer.appendChild(productElement);
        });
        
        // C·∫≠p nh·∫≠t ph√¢n trang cho k·∫øt qu·∫£ t√¨m ki·∫øm
        updatePagination(sortedProducts, 'search-pagination', page);
      }
      
      defaultProducts.style.display = 'none';
      resultsSection.hidden = false;
    }

    // H√†m hi·ªÉn th·ªã s·∫£n ph·∫©m m·∫∑c ƒë·ªãnh
    function showDefaultProducts() {
      const resultsSection = document.getElementById('search-results');
      const defaultProducts = document.getElementById('default-products');
      
      resultsSection.hidden = true;
      defaultProducts.style.display = 'grid';
      renderDefaultProducts();
    }

    // H√†m render s·∫£n ph·∫©m m·∫∑c ƒë·ªãnh
    function renderDefaultProducts() {
      const container = document.getElementById('default-products');
      const allProducts = getCurrentProducts();
      const paginatedProducts = paginateProducts(allProducts, paginationConfig.currentPage);
      
      container.innerHTML = '';
      paginatedProducts.forEach(product => {
        const productElement = createProductElement(product);
        container.appendChild(productElement);
      });
      
      // C·∫≠p nh·∫≠t ph√¢n trang
      updatePagination(allProducts, 'default-pagination', paginationConfig.currentPage);
    }

    // H√†m l·ªçc s·∫£n ph·∫©m theo danh m·ª•c
    function filterProducts(category) {
      currentCategory = category;
      paginationConfig.currentPage = 1; // Reset v·ªÅ trang 1 khi chuy·ªÉn danh m·ª•c
      
      document.querySelectorAll('.categories li').forEach(li => {
        li.setAttribute('aria-selected', 'false');
        li.classList.remove('active');
      });
      
      event.currentTarget.parentElement.setAttribute('aria-selected', 'true');
      event.currentTarget.parentElement.classList.add('active');
      
      renderDefaultProducts();
    }

    // H√†m s·∫Øp x·∫øp s·∫£n ph·∫©m
    function sortProducts(products, sortBy) {
      switch (sortBy) {
        case 'newest':
          return [...products].sort((a, b) => b.id - a.id);
        case 'price-low':
          return [...products].sort((a, b) => a.price - b.price);
        case 'price-high':
          return [...products].sort((a, b) => b.price - a.price);
        case 'name':
          return [...products].sort((a, b) => a.name.localeCompare(b.name));
        default: // popular
          return [...products].sort((a, b) => (b.popular === a.popular) ? 0 : b.popular ? -1 : 1);
      }
    }

    // H√†m t·∫°o HTML cho s·∫£n ph·∫©m (C√ì N√öT TH√äM V√ÄO GI·ªé - ƒê√É ƒêƒÇNG NH·∫¨P)
    function createProductElement(product) {
      const productDiv = document.createElement('article');
      productDiv.className = 'product';
      productDiv.setAttribute('role', 'listitem');
      productDiv.innerHTML = `
        <img 
          src="${product.image}" 
          alt="${product.name} - ${product.description}" 
          loading="lazy"
          onerror="handleImageError(this)"
        >
        <h3>${product.name}</h3>
        <p class="price">${product.price.toLocaleString('vi-VN')}‚Ç´</p>
        <button class="btn-outline" onclick="addToCart(${product.id})" aria-label="Th√™m ${product.name} v√†o gi·ªè h√†ng">
          Th√™m v√†o gi·ªè
        </button>
      `;
      return productDiv;
    }

    // H√†m th√™m v√†o gi·ªè h√†ng (ƒê√É ƒêƒÇNG NH·∫¨P)
    function addToCart(productId) {
      const product = sampleProducts.find(p => p.id === productId);
      if (product) {
        // T·∫°o th√¥ng b√°o toast
        const toast = document.createElement('div');
        toast.className = 'cart-toast success';
        toast.innerHTML = `
          <i class="fas fa-check-circle" aria-hidden="true"></i>
          <span>ƒê√£ th√™m "${product.name}" v√†o gi·ªè h√†ng!</span>
          <button onclick="this.parentElement.remove()" aria-label="ƒê√≥ng th√¥ng b√°o">
            <i class="fas fa-times"></i>
          </button>
        `;
        document.body.appendChild(toast);
        
        // Auto remove after 3 seconds
        setTimeout(() => {
          if (toast.parentElement) {
            toast.remove();
          }
        }, 3000);
      }
    }

    // JavaScript ch√≠nh khi trang load
    document.addEventListener('DOMContentLoaded', function() {
      // Render s·∫£n ph·∫©m m·∫∑c ƒë·ªãnh
      renderDefaultProducts();

      // Chuy·ªÉn ƒë·ªïi gi·ªØa c√°c tab t√¨m ki·∫øm
      const toggleBtns = document.querySelectorAll('.toggle-btn');
      const searchTabs = document.querySelectorAll('.search-tab');
      
      toggleBtns.forEach(btn => {
        btn.addEventListener('click', function() {
          const targetTab = this.getAttribute('data-tab');
          
          // C·∫≠p nh·∫≠t tr·∫°ng th√°i active cho n√∫t
          toggleBtns.forEach(b => {
            b.classList.remove('active');
            b.setAttribute('aria-selected', 'false');
          });
          this.classList.add('active');
          this.setAttribute('aria-selected', 'true');
          
          // Hi·ªÉn th·ªã tab t∆∞∆°ng ·ª©ng
          searchTabs.forEach(tab => {
            tab.classList.remove('active');
            tab.hidden = true;
            if (tab.id === `${targetTab}-search`) {
              tab.classList.add('active');
              tab.hidden = false;
            }
          });
        });
      });
      
      // X·ª≠ l√Ω t√¨m ki·∫øm c∆° b·∫£n
      const basicSearchBtn = document.getElementById('basic-search-btn');
      const basicSearchInput = document.getElementById('basic-search-input');
      
      basicSearchBtn.addEventListener('click', function() {
        const searchTerm = basicSearchInput.value.trim();
        if (!searchTerm) {
          alert('Vui l√≤ng nh·∫≠p t·ª´ kh√≥a t√¨m ki·∫øm');
          basicSearchInput.focus();
          return;
        }
        
        const filters = {
          name: searchTerm
        };
        
        const results = searchProducts(filters);
        displaySearchResults(results);
      });
      
      // X·ª≠ l√Ω t√¨m ki·∫øm n√¢ng cao
      const advancedSearchForm = document.getElementById('advanced-search-form');
      
      advancedSearchForm.addEventListener('submit', function(e) {
        e.preventDefault();
        
        const filters = {
          name: document.getElementById('product-name').value.trim(),
          category: document.getElementById('category').value,
          minPrice: document.getElementById('min-price').value ? parseInt(document.getElementById('min-price').value) : null,
          maxPrice: document.getElementById('max-price').value ? parseInt(document.getElementById('max-price').value) : null
        };
        
        const results = searchProducts(filters);
        displaySearchResults(results);
      });
      
      // X·ª≠ l√Ω s·∫Øp x·∫øp
      const sortSelect = document.getElementById('sort-by');
      sortSelect.addEventListener('change', function() {
        currentSort = this.value;
        const currentProducts = Array.from(document.querySelectorAll('#search-results-grid .product'))
          .map(el => {
            const name = el.querySelector('h3').textContent;
            return sampleProducts.find(p => p.name === name);
          })
          .filter(p => p !== undefined);
        
        if (currentProducts.length > 0) {
          displaySearchResults(currentProducts, this.value);
        } else {
          renderDefaultProducts();
        }
      });
      
      // ƒê·∫∑t l·∫°i form
      const resetBtn = document.getElementById('reset-btn');
      resetBtn.addEventListener('click', function() {
        // Reset t·∫•t c·∫£ input trong form t√¨m ki·∫øm n√¢ng cao
        document.getElementById('product-name').value = '';
        document.getElementById('category').value = '';
        document.getElementById('min-price').value = '';
        document.getElementById('max-price').value = '';
        
        // Hi·ªÉn th·ªã s·∫£n ph·∫©m m·∫∑c ƒë·ªãnh
        showDefaultProducts();
      });

      // Cho ph√©p nh·∫•n Enter ƒë·ªÉ t√¨m ki·∫øm
      basicSearchInput.addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
          basicSearchBtn.click();
        }
      });

      // Debounce cho t√¨m ki·∫øm real-time
      basicSearchInput.addEventListener('input', function(e) {
        clearTimeout(searchTimeout);
        searchTimeout = setTimeout(() => {
          if (e.target.value.trim().length >= 2) {
            basicSearchBtn.click();
          }
        }, 500);
      });

      // Header scroll effect
      window.addEventListener('scroll', () => {
        const header = document.querySelector('.bloom-header');
        if (window.scrollY > 50) {
          header.classList.add('scrolled');
        } else {
          header.classList.remove('scrolled');
        }
      });
      
      // Mobile menu toggle
      document.querySelector('.mobile-menu-toggle').addEventListener('click', function() {
        const nav = document.querySelector('.bloom-nav');
        const isExpanded = this.getAttribute('aria-expanded') === 'true';
        
        nav.classList.toggle('active');
        this.setAttribute('aria-expanded', !isExpanded);
      });

      // Logout confirmation
      document.querySelector('.logout-btn').addEventListener('click', function(e) {
        e.preventDefault();
        if (confirm('B·∫°n c√≥ ch·∫Øc mu·ªën ƒëƒÉng xu·∫•t?')) {
          window.location.href = 'index.html';
        }
      });
    });

    // Th√™m CSS animation cho toast
    const style = document.createElement('style');
    style.textContent = `
      @keyframes slideIn {
        from { transform: translateX(100%); opacity: 0; }
        to { transform: translateX(0); opacity: 1; }
      }
      @keyframes slideOut {
        from { transform: translateX(0); opacity: 1; }
        to { transform: translateX(100%); opacity: 0; }
      }
      .cart-toast {
        position: fixed;
        top: 100px;
        right: 20px;
        background: var(--green-main);
        color: white;
        padding: 15px 25px;
        border-radius: 10px;
        box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        z-index: 10000;
        animation: slideIn 0.3s ease;
        display: flex;
        align-items: center;
        gap: 10px;
      }
      .cart-toast button {
        background: none;
        border: none;
        color: white;
        cursor: pointer;
        padding: 4px;
        border-radius: 4px;
        transition: background 0.3s ease;
      }
      .cart-toast button:hover {
        background: rgba(255,255,255,0.2);
      }
    `;
    document.head.appendChild(style);
  </script>
</body>
</html>